"use strict";(self.webpackChunklux_dashboard=self.webpackChunklux_dashboard||[]).push([[813],{5813:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(7294),l=a(6575),c=a(5998),r=a(3439);const s={wrapper:"uWBL3VP9ZIt5OvmOheJq",card:"O5DPrTElYSU6i1MihbK3",cardItem:"cGlrYUbTojkXVctQYMDA",desc:"ZFupGIwFl1fv76JCDDxg",dialogBody:"K3SMsU8g5AKDlfOX0XWP"};var m=a(8142),d=a(1548),E=a(1092),i=a(1317),o=a(2327),u=a(2580),S=a(5060),p=a(3012),v=a(5444),T=a(1588),_=a(403),N=a(4510),L=a(8940),O=a(377),b=a(1416),I=a(4485),f=a(3257),g=a(2132),$=a(3736);const C={selectContainer:"UZ0eiVCu93FxTZ8tRWjE",btn:"TGfN3Ur6F0qq1DGxlKTa"};function h(e){const{title:t,label:a,open:l,setOpen:c,value:r,onSubmit:s,inputType:d,disabled:E=!1,selectorItems:i,type:u="input"}=e,{t:S}=(0,o.$)(),[h,R]=(0,n.useState)(r);return(0,n.useEffect)((()=>{R(r)}),[r]),n.createElement(p.V,{modalType:"modal",open:l,onOpenChange:(e,t)=>{c(t.open)}},n.createElement(v.h,{disableButtonEnhancement:!0},n.createElement(T.I,{type:d,size:"medium",className:C.input,value:r,disabled:E})),n.createElement(_.c,{"aria-describedby":void 0},n.createElement(N.a,null,n.createElement(L.$,null,t),n.createElement(O.c,{className:C.dialogBody},n.createElement(b._,{required:!0},a),"input"===u?n.createElement(T.I,{type:d,required:!0,value:h,onChange:e=>{R(e.target.value)}}):i&&n.createElement("div",{className:C.selectContainer},n.createElement(I.L,{value:h,onOptionSelect:(e,t)=>{R(t.optionValue)}},i.map((e=>n.createElement(f.W,{key:e.content},e.content)))),n.createElement(g.z,{onClick:()=>{R("")},className:C.btn},S(m.$.FORM_RESET)))),n.createElement($.k,null,n.createElement(v.h,{disableButtonEnhancement:!0},n.createElement(g.z,{appearance:"secondary"},S(m.$.CLOSE))),n.createElement(g.z,{appearance:"primary",onClick:()=>{s(h)}},S(m.$.FORM_SAVE))))))}function R(){const{t:e}=(0,o.$)(),t=(0,c.I0)(),[a,r]=(0,n.useState)(!1),p=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),v=(0,c.v9)((e=>e.setting)),[T,_]=(0,n.useState)([]);return(0,n.useEffect)((()=>{!async function(){const{os:e}=await(0,l.Z$)();(0,l.l_)().then((t=>{const a=[...t.filter((t=>"darwin"!==e||t.Name.startsWith("en")))].map((e=>({id:e.Name,content:e.Name})));_(a)}))}()}),[]),n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.DEFAULT_INTERFACE)),n.createElement(i.d,null,e(m.$.DEFAULT_INTERFACE_TOOLTIP))),n.createElement(h,{title:"Edit the default interface name",open:a,setOpen:r,onSubmit:a=>{(async a=>{const n={...v,defaultInterface:a};await(0,l.Lt)(n),t(u.zj.actions.setSetting(n)),r(!1),S.rB.success(e(m.$.SAVE_SUCCESS))})(a)},label:"Default interface name",value:v.defaultInterface,disabled:p,type:"selector",selectorItems:T})))}function y(){const{t:e}=(0,o.$)(),t=(0,c.I0)(),[a,r]=(0,n.useState)(!1),p=(0,c.v9)((e=>e.setting)),v=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading));return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.TRUE_PROXY_SERVER)),n.createElement(i.d,null,e(m.$.TRUE_PROXY_SERVER_TOOLTIPS))),n.createElement(h,{title:"Edit the true proxy server",open:a,setOpen:r,onSubmit:a=>{(async a=>{const n={...p,trueProxyServer:a};await(0,l.Lt)(n),t(u.zj.actions.setSetting(n)),r(!1),S.rB.success(e(m.$.SAVE_SUCCESS))})(a)},label:"True proxy server",value:p.trueProxyServer,disabled:v})))}var D=a(3738);function P(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),a=(0,n.useRef)([{content:"url-test",id:"url-test"},{content:"fallback",id:"fallback"}]),r=(0,c.v9)((e=>e.setting)),[p,v]=(0,n.useState)(!1),T=(0,c.I0)(),_=async t=>{const a={...r,autoMode:t};await(0,l.Lt)(a),T(u.zj.actions.setSetting(a)),v(!1),S.rB.success(e(m.$.SAVE_SUCCESS))};return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.MODE_SWITCH_LABEL)),n.createElement(i.d,null,e(m.$.MODE_SWITCH_TOOLTIP))),n.createElement(D.r,{disabled:t,checked:r.autoMode.enabled,onChange:(e,t)=>{_({...r.autoMode,enabled:t.checked})}})),r.autoMode.enabled&&n.createElement(n.Fragment,null,n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.PROXY_MODE_TYPE_LABEL)),n.createElement(i.d,null,e(m.$.PROXY_MODE_TYPE_DESC))),n.createElement(I.L,{disabled:t,value:r.autoMode.type,onOptionSelect:(e,t)=>{_({...r.autoMode,type:t.optionValue})}},a.current.map((e=>n.createElement(f.W,{key:e.id},e.content))))),n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.TESTING_URL_LABEL)),n.createElement(i.d,null,e(m.$.TESTING_URL_DESC))),n.createElement(h,{disabled:t,title:"Edit testing url",open:p,setOpen:v,onSubmit:e=>{_({...r.autoMode,url:e})},label:"Testing url",value:r.autoMode.url}))))}function A(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.setting)),a=(0,c.I0)(),[r,p]=(0,n.useState)(!1),v=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),T=async n=>{const c={...t,localServer:{http:{...t.localServer.http,...n}}};await(0,l.Lt)(c),a(u.zj.actions.setSetting(c)),p(!1),S.rB.success(e(m.$.SAVE_SUCCESS))};return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.HTTP_SERVER_SWITCH_LABEL)),n.createElement(i.d,null,e(m.$.HTTP_SERVER_SWITCH_TOOLTIP))),n.createElement(D.r,{checked:t.localServer.http.enabled,onChange:(e,t)=>{T({enabled:t.checked})},disabled:v})),t.localServer.http.enabled&&n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.HTTP_SERVER_PORT_LABEL)),n.createElement(i.d,null,e(m.$.HTTP_SERVER_PORT_DESC))),n.createElement(h,{title:"Edit the local http server port",inputType:"number",open:r,setOpen:p,onSubmit:e=>{T({port:+e})},label:"Http server port",value:t.localServer.http.port.toString(),disabled:v})))}const V=["114.114.114.114","119.29.29.29"],k=["8.8.8.8","1.1.1.1","https://dns.google/dns-query"],B=["114.114.114.114","119.29.29.29","https://doh.pub/dns-query"];function M(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),a=(0,n.useRef)(k.map((e=>({content:e,id:e})))),r=(0,n.useRef)(B.map((e=>({content:e,id:e})))),p=(0,n.useRef)(V.map((e=>({content:e,id:e})))),v=(0,c.v9)((e=>e.setting)),T=(0,c.I0)(),_=async t=>{const a={...v,dns:t};await(0,l.Lt)(a),T(u.zj.actions.setSetting(a)),S.rB.success(e(m.$.SAVE_SUCCESS))},N=v.dns.remote.startsWith("https")||v.dns.local.startsWith("https");return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.REMOTE_DNS_LABEL)),n.createElement(i.d,null,e(m.$.REMOTE_DNS_DESC))),n.createElement(I.L,{disabled:t,value:v.dns.remote,onOptionSelect:(e,t)=>{_({...v.dns,remote:t.optionValue})}},a.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))),n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.LOCAL_DNS_LABEL)),n.createElement(i.d,null,e(m.$.LOCAL_DNS_DESC))),n.createElement(I.L,{disabled:t,value:v.dns.local,onOptionSelect:(e,t)=>{_({...v.dns,local:t.optionValue})}},r.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))),N&&n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.BOOST_DNS_LABEL)),n.createElement(i.d,null,e(m.$.BOOST_DNS_DESC))),n.createElement(I.L,{disabled:t,value:v.dns.boost,onOptionSelect:(e,t)=>{_({...v.dns,boost:t.optionValue})}},p.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))))}var F=a(1275);function U(){const{t:e}=(0,o.$)(),[t,a]=(0,n.useState)("");return(0,n.useEffect)((()=>{(0,l.Mr)().then((e=>{a(e)}))}),[]),n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.CONFIG_FILE)),n.createElement(i.d,null,e(m.$.CONFIG_FILE_TIP))),n.createElement(g.z,{onClick:()=>{(0,F.DI)(t)}},e(m.$.OPEN_DIR))))}function W(){return n.createElement("div",{className:s.form},n.createElement(n.Fragment,null,n.createElement("div",{className:s.fields},n.createElement(M,null),n.createElement(R,null),n.createElement(y,null),n.createElement(A,null),n.createElement(P,null),n.createElement(U,null))))}function w(){const e=(0,c.I0)(),[t,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{a(!0),(0,l.$8)().then((t=>{e(r.z.actions.setSetting(t))})).finally((()=>{a(!1)}))}),[e]),n.createElement("div",{className:s.wrapper},!t&&n.createElement(W,null))}}}]);