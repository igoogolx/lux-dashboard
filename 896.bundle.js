"use strict";(self.webpackChunklux_dashboard=self.webpackChunklux_dashboard||[]).push([[896],{8896:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var l=t(7294),r=t(6667),n=t(5998),s=t(2580),c=t(6974),o=t(8142),d=t(2327);const i="PEOeiOlksHX8UigbjTlz",m="S4n_y3jUYBUxA6OVIHRw",u="vcud7SglcOjHAKf3K8P_",E="q31gkOLNCkBALk8NkJb5";var p=t(5638);var v;function f(e){const{value:a,type:t=v.Speed}=e,{value:r,unit:n}=(0,p.E6)(a);return l.createElement("span",{className:"WTDuUtr5_3BFlalSHCqs"},l.createElement("span",{className:"s76FCWrzxtq18t9pJdta"},r),l.createElement("span",{className:"DE4APrAnsvTdCrejWEjn"},t===v.Speed?`${n}/S`:n))}!function(e){e[e.Speed=0]="Speed",e[e.Total=1]="Total"}(v||(v={}));var N,y=t(5071),T=t(2631);function x(e){const{data:a}=e,[t,r]=(0,y.jf)({type:"line",data:{labels:[],datasets:[{label:T.ZP.t(o.$.DOWNLOAD),borderColor:"#22ce70",borderWidth:1.5,fill:!1,pointRadius:0,data:[],tension:.2},{label:T.ZP.t(o.$.UPLOAD),borderColor:"#ff6573",borderWidth:1,fill:!1,pointRadius:0,data:[],tension:.2}]},options:{animation:{},maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{display:!1}},y:{border:{width:0,dash:[5,5]},grid:{color:"#50585b"},ticks:{callback:e=>{const{value:a,unit:t}=(0,p.E6)(e);return a+t},autoSkip:!0,maxTicksLimit:6}}}}});return(0,l.useEffect)((()=>{r&&(r.data.labels=a.map(((e,a)=>a)),r.data.datasets&&(r.data.datasets[0].data=a.map((e=>e.download)),r.data.datasets[1].data=a.map((e=>e.upload))),r.update("none"))}),[r,a]),l.createElement("canvas",{ref:t})}!function(e){e[e.Proxy=0]="Proxy",e[e.Direct=1]="Direct"}(N||(N={}));const b={[N.Proxy]:o.$.PROXY,[N.Direct]:o.$.DIRECT};function w(e){const{speed:a,total:t,type:r}=e,n=a.length?a[a.length-1]:{upload:0,download:0},{t:s}=(0,d.$)();return l.createElement("div",{className:"z4S8s6jIiqyIDf8rBtwM"},l.createElement("div",{className:"MfIBCWbDt2IsJ2ToWxQ6"},l.createElement("div",{className:"zUbsa0wFSygvJqMQiAQ2"},l.createElement("div",{className:"msJbjrJgf9cwyv_pjmVg"},l.createElement(c.u,{content:s(b[r])},l.createElement(c.JO,{name:r===N.Proxy?c.dT.Plane:c.dT.ToTop,size:c.ZK.Large})))),l.createElement("div",{className:"T3r04grQ27CxlsxX0f0Z"},l.createElement("div",{className:i},l.createElement("div",{className:m},"Speed",l.createElement(c.JO,{name:c.dT.Flash})),l.createElement("div",{className:u},l.createElement("div",{className:E},l.createElement(c.JO,{name:c.dT.ArrowUp}),l.createElement(f,{value:n.upload})),l.createElement("div",{className:E},l.createElement(c.JO,{name:c.dT.ArrowDown}),l.createElement(f,{value:n.download})))),l.createElement("div",{className:i},l.createElement("div",{className:m},"Total",l.createElement(c.JO,{name:c.dT.Database})),l.createElement("div",{className:u},l.createElement("div",{className:E},l.createElement(c.JO,{name:c.dT.ArrowUp}),l.createElement(f,{value:t.upload,type:v.Total})),l.createElement("div",{className:E},l.createElement(c.JO,{name:c.dT.ArrowDown}),l.createElement(f,{value:t.download,type:v.Total})))))),l.createElement("div",{className:"Snic_869FL_E7iNGGLLh"},l.createElement(x,{data:a})))}var h=t(1560);function g(){const e=(0,n.v9)((e=>{const a={proxy:[],direct:[]};return e.traffics.now.forEach((e=>{a.proxy.push(e.proxy),a.direct.push(e.direct)})),a})),a=(0,n.v9)((e=>e.traffics.total)),t=(0,n.I0)();return(0,l.useEffect)((()=>{const e=(0,r.fN)({onMessage:e=>{t(s.KZ.actions.addNow({traffic:e}))},onError:()=>{e.close()}}),a=(0,r.C6)({onMessage:e=>{t(s.KZ.actions.setTotal({traffic:e}))},onError:()=>{a.close()}});return()=>{e.close()}}),[t]),e&&a?l.createElement("div",{className:"boXa8Cm6mewdGlVEAh1v"},l.createElement(w,{speed:e.proxy,total:a.proxy,type:N.Proxy}),l.createElement(w,{speed:e.direct,total:a.direct,type:N.Direct})):l.createElement(l.Fragment,null)}h.kL.register(h.ST,h.jn,h.od,h.f$,h.Dx,h.uw)},5638:(e,a,t)=>{t.d(a,{E6:()=>n});const l=1048576,r=1024*l,n=e=>e<l?(e=>({value:(e/1024).toFixed(0),unit:"K"}))(e):e<r?(e=>({value:(e/l).toFixed(1),unit:"M"}))(e):(e=>({value:(e/r).toFixed(1),unit:"G"}))(e)}}]);