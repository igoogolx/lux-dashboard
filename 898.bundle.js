"use strict";(self.webpackChunklux_dashboard=self.webpackChunklux_dashboard||[]).push([[898],{8898:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var n=a(7294),l=a(6575),c=a(5998),r=a(3439);const s={wrapper:"uWBL3VP9ZIt5OvmOheJq",card:"O5DPrTElYSU6i1MihbK3",cardItem:"cGlrYUbTojkXVctQYMDA",desc:"ZFupGIwFl1fv76JCDDxg",dialogBody:"K3SMsU8g5AKDlfOX0XWP"};var m=a(8142),d=a(1548),E=a(1092),i=a(1317),o=a(2327),u=a(2580),S=a(5060),p=a(3012),v=a(5444),_=a(1588),T=a(403),L=a(4510),b=a(8940),N=a(377),O=a(1416),g=a(4485),f=a(3257),h=a(3736),I=a(2132);function $(e){const{title:t,label:a,open:l,setOpen:c,value:r,onSubmit:d,inputType:E,disabled:i=!1,selectorItems:u,type:S="input"}=e,{t:$}=(0,o.$)(),[C,y]=(0,n.useState)(r);return(0,n.useEffect)((()=>{y(r)}),[r]),n.createElement(p.V,{modalType:"modal",open:l,onOpenChange:(e,t)=>{c(t.open)}},n.createElement(v.h,{disableButtonEnhancement:!0},n.createElement(_.I,{type:E,size:"medium",className:s.input,value:r,disabled:i})),n.createElement(T.c,{"aria-describedby":void 0},n.createElement(L.a,null,n.createElement(b.$,null,t),n.createElement(N.c,{className:s.dialogBody},n.createElement(O._,{required:!0},a),"input"===S?n.createElement(_.I,{type:E,required:!0,value:C,onChange:e=>{y(e.target.value)}}):u&&n.createElement(g.L,{value:C,onOptionSelect:(e,t)=>{y(t.optionValue)}},u.map((e=>n.createElement(f.W,{key:e.content},e.content))))),n.createElement(h.k,null,n.createElement(v.h,{disableButtonEnhancement:!0},n.createElement(I.z,{appearance:"secondary"},$(m.$.CLOSE))),n.createElement(I.z,{appearance:"primary",onClick:()=>{d(C)}},$(m.$.FORM_SAVE))))))}function C(){const{t:e}=(0,o.$)(),t=(0,c.I0)(),[a,r]=(0,n.useState)(!1),p=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),v=(0,c.v9)((e=>e.setting)),[_,T]=(0,n.useState)([]);return(0,n.useEffect)((()=>{!async function(){const{os:e}=await(0,l.Z$)();(0,l.l_)().then((t=>{const a=[...t.filter((t=>"darwin"!==e||t.Name.startsWith("en")))].map((e=>({id:e.Name,content:e.Name})));T(a)}))}()}),[]),n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.DEFAULT_INTERFACE)),n.createElement(i.d,null,e(m.$.DEFAULT_INTERFACE_TOOLTIP))),n.createElement($,{title:"Edit the default interface name",open:a,setOpen:r,onSubmit:a=>{(async a=>{const n={...v,defaultInterface:a};await(0,l.Lt)(n),t(u.zj.actions.setSetting(n)),r(!1),S.rB.success(e(m.$.SAVE_SUCCESS))})(a)},label:"Default interface name",value:v.defaultInterface,disabled:p,type:"selector",selectorItems:_})))}function y(){const{t:e}=(0,o.$)(),t=(0,c.I0)(),[a,r]=(0,n.useState)(!1),p=(0,c.v9)((e=>e.setting)),v=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading));return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.TRUE_PROXY_SERVER)),n.createElement(i.d,null,e(m.$.TRUE_PROXY_SERVER_TOOLTIPS))),n.createElement($,{title:"Edit the true proxy server",open:a,setOpen:r,onSubmit:a=>{(async a=>{const n={...p,trueProxyServer:a};await(0,l.Lt)(n),t(u.zj.actions.setSetting(n)),r(!1),S.rB.success(e(m.$.SAVE_SUCCESS))})(a)},label:"True proxy server",value:p.trueProxyServer,disabled:v})))}var R=a(3738);function D(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),a=(0,n.useRef)([{content:"url-test",id:"url-test"},{content:"fallback",id:"fallback"}]),r=(0,c.v9)((e=>e.setting)),[p,v]=(0,n.useState)(!1),_=(0,c.I0)(),T=async t=>{const a={...r,autoMode:t};await(0,l.Lt)(a),_(u.zj.actions.setSetting(a)),v(!1),S.rB.success(e(m.$.SAVE_SUCCESS))};return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.MODE_SWITCH_LABEL)),n.createElement(i.d,null,e(m.$.MODE_SWITCH_TOOLTIP))),n.createElement(R.r,{disabled:t,checked:r.autoMode.enabled,onChange:(e,t)=>{T({...r.autoMode,enabled:t.checked})}})),r.autoMode.enabled&&n.createElement(n.Fragment,null,n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.PROXY_MODE_TYPE_LABEL)),n.createElement(i.d,null,e(m.$.PROXY_MODE_TYPE_DESC))),n.createElement(g.L,{disabled:t,value:r.autoMode.type,onOptionSelect:(e,t)=>{T({...r.autoMode,type:t.optionValue})}},a.current.map((e=>n.createElement(f.W,{key:e.id},e.content))))),n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.TESTING_URL_LABEL)),n.createElement(i.d,null,e(m.$.TESTING_URL_DESC))),n.createElement($,{disabled:t,title:"Edit testing url",open:p,setOpen:v,onSubmit:e=>{T({...r.autoMode,url:e})},label:"Testing url",value:r.autoMode.url}))))}function A(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.setting)),a=(0,c.I0)(),[r,p]=(0,n.useState)(!1),v=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),_=async n=>{const c={...t,localServer:{http:{...t.localServer.http,...n}}};await(0,l.Lt)(c),a(u.zj.actions.setSetting(c)),p(!1),S.rB.success(e(m.$.SAVE_SUCCESS))};return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.HTTP_SERVER_SWITCH_LABEL)),n.createElement(i.d,null,e(m.$.HTTP_SERVER_SWITCH_TOOLTIP))),n.createElement(R.r,{checked:t.localServer.http.enabled,onChange:(e,t)=>{_({enabled:t.checked})},disabled:v})),t.localServer.http.enabled&&n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.HTTP_SERVER_PORT_LABEL)),n.createElement(i.d,null,e(m.$.HTTP_SERVER_PORT_DESC))),n.createElement($,{title:"Edit the local http server port",inputType:"number",open:r,setOpen:p,onSubmit:e=>{_({port:+e})},label:"Http server port",value:t.localServer.http.port.toString(),disabled:v})))}const P=["114.114.114.114","119.29.29.29"],B=["8.8.8.8","1.1.1.1","https://dns.google/dns-query"],V=["114.114.114.114","119.29.29.29","https://doh.pub/dns-query"];function k(){const{t:e}=(0,o.$)(),t=(0,c.v9)((e=>e.manager.isStared||e.manager.isLoading)),a=(0,n.useRef)(B.map((e=>({content:e,id:e})))),r=(0,n.useRef)(V.map((e=>({content:e,id:e})))),p=(0,n.useRef)(P.map((e=>({content:e,id:e})))),v=(0,c.v9)((e=>e.setting)),_=(0,c.I0)(),T=async t=>{const a={...v,dns:t};await(0,l.Lt)(a),_(u.zj.actions.setSetting(a)),S.rB.success(e(m.$.SAVE_SUCCESS))},L=v.dns.remote.startsWith("https")||v.dns.local.startsWith("https");return n.createElement(d.Z,{className:s.card},n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.REMOTE_DNS_LABEL)),n.createElement(i.d,null,e(m.$.REMOTE_DNS_DESC))),n.createElement(g.L,{disabled:t,value:v.dns.remote,onOptionSelect:(e,t)=>{T({...v.dns,remote:t.optionValue})}},a.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))),n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.LOCAL_DNS_LABEL)),n.createElement(i.d,null,e(m.$.LOCAL_DNS_DESC))),n.createElement(g.L,{disabled:t,value:v.dns.local,onOptionSelect:(e,t)=>{T({...v.dns,local:t.optionValue})}},r.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))),L&&n.createElement("div",{className:s.cardItem},n.createElement("div",{className:s.desc},n.createElement(E.T,null,e(m.$.BOOST_DNS_LABEL)),n.createElement(i.d,null,e(m.$.BOOST_DNS_DESC))),n.createElement(g.L,{disabled:t,value:v.dns.boost,onOptionSelect:(e,t)=>{T({...v.dns,boost:t.optionValue})}},p.current.map((e=>n.createElement(f.W,{key:e.id,value:e.id},e.content))))))}function M(){return n.createElement("div",{className:s.form},n.createElement(n.Fragment,null,n.createElement("div",{className:s.fields},n.createElement(k,null),n.createElement(C,null),n.createElement(y,null),n.createElement(A,null),n.createElement(D,null))))}function U(){const e=(0,c.I0)(),[t,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{a(!0),(0,l.$8)().then((t=>{e(r.z.actions.setSetting(t))})).finally((()=>{a(!1)}))}),[e]),n.createElement("div",{className:s.wrapper},!t&&n.createElement(M,null))}}}]);