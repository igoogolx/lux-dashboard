"use strict";(self.webpackChunklux_dashboard=self.webpackChunklux_dashboard||[]).push([[34],{9034:(e,a,t)=>{t.r(a),t.d(a,{default:()=>D});var r=t(7294),l=t(6575),n=t(5998),c=t(2580),s=t(5060),o=t(5638);const d={wrapper:"WTDuUtr5_3BFlalSHCqs",value:"s76FCWrzxtq18t9pJdta",unit:"DE4APrAnsvTdCrejWEjn"};var i;function m(e){const{value:a,type:t=i.Speed}=e,{value:l,unit:n}=(0,o.E6)(a);return r.createElement("span",{className:d.wrapper},r.createElement("span",{className:d.value},l),r.createElement("span",{className:d.unit},t===i.Speed?`${n}/S`:n))}!function(e){e[e.Speed=0]="Speed",e[e.Total=1]="Total"}(i||(i={}));const u={flowInfo:"cY4tMVARqRRZHW1HeNcp",item:"okihlzTidowH4RI_5pRy",title:"oFLs3DNaEOExmlAhjIgp",details:"TQioIeIkNlUsTgdEW7DP",detail:"QKHLrH_707z9bcE2uwAh"};function p(e){const{current:a,total:t}=e;return r.createElement("div",{className:u.flowInfo},r.createElement("div",{className:u.item},r.createElement("div",{className:u.title},"Speed"),r.createElement("div",{className:u.details},r.createElement("div",{className:u.detail},r.createElement(s.JO,{name:s.dT.ArrowUp}),r.createElement(m,{value:a.upload})),r.createElement("div",{className:u.detail},r.createElement(s.JO,{name:s.dT.ArrowDown}),r.createElement(m,{value:a.download})))),r.createElement("div",{className:u.item},r.createElement("div",{className:u.title},"Total"),r.createElement("div",{className:u.details},r.createElement("div",{className:u.detail},r.createElement(s.JO,{name:s.dT.ArrowUp}),r.createElement(m,{value:t.upload,type:i.Total})),r.createElement("div",{className:u.detail},r.createElement(s.JO,{name:s.dT.ArrowDown}),r.createElement(m,{value:t.download,type:i.Total})))))}const E={wrapper:"z4S8s6jIiqyIDf8rBtwM",data:"MfIBCWbDt2IsJ2ToWxQ6",line:"uNYxu6biRLbcmxDdYF6b",info:"FO9We8uCXUnCFA8rlMJa",header:"zUbsa0wFSygvJqMQiAQ2",avatar:"msJbjrJgf9cwyv_pjmVg",content:"T3r04grQ27CxlsxX0f0Z",graph:"Snic_869FL_E7iNGGLLh"};var v=t(5071),f=t(2631),N=t(8142);const w=()=>({type:"line",data:{labels:[],datasets:[{label:f.ZP.t(N.$.DOWNLOAD),borderColor:"#22ce70",borderWidth:1.5,fill:!1,pointRadius:0,data:[],tension:.2},{label:f.ZP.t(N.$.UPLOAD),borderColor:"#ff6573",borderWidth:1,fill:!1,pointRadius:0,data:[],tension:.2}]},options:{animation:{},maintainAspectRatio:!1,scales:{x:{grid:{display:!1},ticks:{display:!1}},y:{border:{width:0,dash:[5,5]},grid:{color:"#50585b"},ticks:{callback:e=>{const{value:a,unit:t}=(0,o.E6)(e);return a+t},autoSkip:!0,maxTicksLimit:6}}}}});function x(e){const{data:a}=e,[t,l]=(0,v.jf)(w());return(0,r.useEffect)((()=>{l&&(l.data.labels=a.proxy.map(((e,a)=>a)),l.data.datasets&&(l.data.datasets[0].data=a.proxy.map((e=>e.upload+e.download)),l.data.datasets[1].data=a.direct.map((e=>e.upload+e.download))),l.update("none"))}),[l,a]),r.createElement("canvas",{ref:t})}var h;function b(e){return e.length?e[e.length-1]:{upload:0,download:0}}function y(e){const{speed:a,total:t}=e,l=b(a.proxy),n=b(a.direct);return r.createElement("div",{className:E.wrapper},r.createElement("div",{className:E.data},r.createElement("div",{className:E.info},r.createElement("div",{className:E.header},r.createElement("div",{className:E.avatar},"Proxy")),r.createElement("div",{className:E.content},r.createElement(p,{current:l,total:t.proxy}))),r.createElement("div",{className:E.line}),r.createElement("div",{className:E.info},r.createElement("div",{className:E.header},r.createElement("div",{className:E.avatar},"Direct")),r.createElement("div",{className:E.content},r.createElement(p,{current:n,total:t.direct})))),r.createElement("div",{className:E.graph},r.createElement(x,{data:a})))}!function(e){e[e.Proxy=0]="Proxy",e[e.Direct=1]="Direct"}(h||(h={}));var T=t(1560);const g={wrapper:"boXa8Cm6mewdGlVEAh1v"};function D(){const e=(0,n.v9)((e=>{const a={proxy:[],direct:[]};return e.traffics.now.forEach((e=>{a.proxy.push(e.proxy),a.direct.push(e.direct)})),a})),a=(0,n.v9)((e=>e.traffics.total)),t=(0,n.I0)();return(0,r.useEffect)((()=>{const e=(0,l.fN)({onMessage:e=>{t(c.KZ.actions.addNow({traffic:e}))},onError:()=>{e.close()}}),a=(0,l.C6)({onMessage:e=>{t(c.KZ.actions.setTotal({traffic:e}))},onError:()=>{a.close()}});return()=>{e.close()}}),[t]),e&&a?r.createElement("div",{className:g.wrapper},r.createElement(y,{speed:e,total:a})):r.createElement(r.Fragment,null)}T.kL.register(T.ST,T.jn,T.od,T.f$,T.Dx,T.uw)},5638:(e,a,t)=>{t.d(a,{E6:()=>n});const r=1048576,l=1024*r,n=e=>e<r?(e=>({value:(e/1024).toFixed(0),unit:"K"}))(e):e<l?(e=>({value:(e/r).toFixed(1),unit:"M"}))(e):(e=>({value:(e/l).toFixed(1),unit:"G"}))(e)}}]);